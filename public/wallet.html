
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Wallet</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel = "icon" href ="img/favicon.png" type = "image/png"> 
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700,800" rel="stylesheet">

    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="css/all.min.css">
    <!-- Theme Style -->
    <link rel="stylesheet" href="css/style.css">
  </head>

  <body style="background-color: black">
    
    <header role="banner">
      <nav class="navbar navbar-expand-md navbar-light bg-light" >
        <a class="navbar-brand" href="home.html" style="color: white"><i class="fas fa-hamburger"></i> Foody</a>
        <button class="navbar-toggler" type="button" style="background:white" data-toggle="collapse" data-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarTogglerDemo01" >
          <ul class="navbar-nav mr-auto mt-2 mt-lg-0"></ul>
          <form class="form-inline my-2 my-lg-0">
            <h4 style="margin-left:4px; margin-right: 5px; color: white"><strong>Welcome <span id="navuser"></span> </strong> </h4>
            <a id="cart" href="cart.html" class="btn btn-white btn-outline-white" style="margin: 5px">Cart</a>
            <a id="orders" href="orders.html" class="btn btn-white btn-outline-white" style="margin: 5px">Orders</a>
            <a id="wallet" href="wallet.html" class="btn btn-white btn-outline-white" style="margin: 5px">Wallet</a>
            <a id="userDetails" href="user.html" class="btn btn-white btn-outline-white" style="margin: 5px">Account Settings</a>
            <a id="logout" class="btn btn-white btn-outline-white" style="color: white; margin: 5px;">Logout</a>
          </form>
        </div>
      </nav>
    </header>

      <div class="card" style="margin:auto; margin-bottom:50px; margin-top:150px; width: 70%">
        <div class="card-header" style="letter-spacing: 5px;font-size: larger;">
          WALLET <i class="fas fa-wallet"></i>
        </div>
        <div class="card-body">
          <div id="min-wallet" style="display: none" class="alert alert-warning alert-dismissible fade show" role="alert">
            Please ensure your wallet is always above <strong>Rs.150 at all times!</strong>
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <h6 class="card-title" style="color: black; margin-bottom: 0px;"><span id="walletun"></span></h6>
          <small id="currentemail"></small>
          <p class="card-text">Current Balance: &#8377<span id="walletm">0</span></p>
          <a href="money.html" class="btn btn-primary">Add money</a>
        </div>
       <!--  <div class="alert alert-success" id="alert-newuser" style="display: none; margin: 10px" role="alert">
          <h4 class="alert-heading">Welcome!</h4>
          <p>You have been credited with Rs.200 because you're a new user</p>
          <hr>
          <p class="mb-0">Have fun ;)</p>
        </div> -->
      </div>

      <div class="jumbotron" id="newcard" style="width: 70%; margin: auto; margin-bottom:50px">
        <h3 style="font-size: larger">SAVED CARDS</h3>
        
        <!-- Button trigger modal -->
        <button type="button" class="btn btn-primary" style="margin-bottom: 10px" data-toggle="modal" data-target="#exampleModalCenter">
          Add Card
        </button>
        <div class="alert alert-success" id="addedcard" role="alert" style="display: none">
         Card Added successfully!
        </div>
        <div class="alert alert-danger" role="alert" id="deletedcard" style="display: none">
          Card Removed Successfully!
        </div>

        <!-- Modal -->
        <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalCenterTitle">Add a new card</h5>
              </div>
              <div class="modal-body">
                <form id="new-card">
                  <div class="form-row">
                    <div class="form-group col-md-12">
                      <label for="cardname" style="color: black;">CARD HOLDER NAME:</label>
                      <input type="text" class="form-control" id="cardname" placeholder="Name" required>
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="form-group col-md-12">
                      <label for="cardno" style="color: black;">CARD NO:</label>
                      <input type="text" class="form-control" id="cardno" data-type="card-number" placeholder="Card number" onkeypress="return /[0-9]/i.test(event.key)" required maxLength="19" minLength="19">
                    </div>
                  </div> 
                  <div class="form-row">  
                    <div class="form-group col-md-6">
                      <label for="expr" style="color: black;">EXPR DATE:</label>
                      <input type="month" class="form-control" id="cardexpr" required min="2020-04">
                    </div>
                    <div class="form-group col-md-6">
                      <label for="cvv" style="color: black;">CVV</label>
                      <input type="text" class="form-control" id="cvv" onkeypress="return /[0-9]/i.test(event.key)" required maxLength="3" minLength="3">
                    </div>
                  </div>
                  <div class="modal-footer form-row">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Save changes</button>
                  </div>               
                </form>
              </div>
            </div>
          </div>
        </div>
       </div> 



        <div class="jumbotron" id="newaccount" style="width: 70%; margin: auto; margin-bottom:50px">
          <h3 style="font-size: larger">SAVED ACCOUNTS</h3>
          
          <!-- Button trigger modal -->
          <button type="button" class="btn btn-primary" style="margin-bottom: 10px" data-toggle="modal" data-target="#exampleModalCenter1">
            Add Account
          </button>
          <div class="alert alert-success" id="addedaccount" role="alert" style="display: none">
           Account Added successfully!
          </div>
          <div class="alert alert-danger" role="alert" id="deletedaccount" style="display: none">
            Account Removed Successfully!
          </div>

          <!-- Modal -->
          <div class="modal fade" id="exampleModalCenter1" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalCenterTitle1">Add a new account</h5>
                </div>
                <div class="modal-body">
                  <form id="new-account">
                    <div class="form-row">
                      <div class="form-group col-md-12">
                        <label for="accountname" style="color: black;">BANK NAME:</label>
                        <select class="form-control form-control-sm" type="text" id="accountname" placeholder="Bank Name" required>
                            <option>Allahabad Bank</option>
                            <option>Andhra Bank</option>
                            <option>Axis Bank</option>
                            <option>Bank of Bahrain and Kuwait</option>
                            <option>Bank of Baroda</option>
                            <option>Bank of India</option>
                            <option>Bank of Maharashtra</option>
                            <option>Canara Bank</option>
                            <option>Central Bank of India</option>
                            <option>City Union Bank</option>
                            <option>Corporation Bank</option>
                            <option>Deutsche Bank</option>
                            <option>Development Credit Bank</option>
                            <option>Dhanlaxmi Bank</option>
                            <option>Federal Bank</option>
                            <option>ICICI Bank</option>
                            <option>IDBI Bank</option>
                            <option>Indian Bank</option>
                            <option>Indian Overseas Bank</option>
                            <option>IndusInd Bank</option>
                            <option>ING Vysya Bank</option>
                            <option>Jammu and Kashmir Bank</option>
                            <option>Karnataka Bank Ltd</option>
                            <option>Karur Vysya Bank</option>
                            <option>Kotak Bank</option>
                            <option>Laxmi Vilas Bank</option>
                            <option>Oriental Bank of Commerce</option>
                            <option>Punjab National Bank</option>
                            <option>Shamrao Vitthal Co-operative Bank</option>
                            <option>South Indian Bank</option>
                            <option>State Bank of Bikaner & Jaipur</option>
                            <option>State Bank of Hyderabad</option>
                            <option>State Bank of India</option>
                            <option>State Bank of Mysore</option>
                            <option>State Bank of Patiala</option>
                            <option>State Bank of Travancore</option>
                            <option>Syndicate Bank</option>
                            <option>Tamilnad Mercantile Bank Ltd.</option>
                            <option>UCO Bank</option>
                            <option>Union Bank of India</option>
                            <option>United Bank of India</option>
                            <option>Vijaya Bank</option>
                            <option>Yes Bank Ltd</option>
                        </select>
                      </div>
                    </div>
                    <div class="form-row">
                      <div class="form-group col-md-12">
                        <label for="accountno" style="color: black;">ACCOUNT NO:</label>
                        <input type="text" class="form-control" id="accountno" data-type="account-number" placeholder="Account number" onkeypress="return /[0-9]/i.test(event.key)" required maxLength="18" minLength="9">
                      </div>
                    </div> 
                    <div class="form-row">  
                      <div class="form-group col-md-12">
                        <label for="ifsc" style="color: black;">IFSC</label>
                        <input type="text" class="form-control" id="ifsc" data-type="ifsc" placeholder="IFSC" onkeypress="return /[0-9]/i.test(event.key)" required maxLength="11" minLength="11">
                      </div>
                    </div>
                    <div class="modal-footer form-row">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                      <button type="submit" class="btn btn-primary">Add account!</button>
                    </div>               
                  </form>
                </div>
              </div>
            </div>
          </div>





    <!-- loader -->
    <div id="loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#cf1d16"/></svg></div>


<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-analytics.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-firestore.js"></script>

<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyBMtWc2eSZY4iP2tBTwDUCYthDYdJbSKvk",
    authDomain: "softeng-ca5ca.firebaseapp.com",
    databaseURL: "https://softeng-ca5ca.firebaseio.com",
    projectId: "softeng-ca5ca",
    storageBucket: "softeng-ca5ca.appspot.com",
    messagingSenderId: "408327246826",
    appId: "1:408327246826:web:9abe5e21d0f4fce3e2d893",
    measurementId: "G-Q396W6J4M3"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();

    const auth = firebase.auth();
    const db = firebase.firestore();


</script>


    <script src="js/popper.min.js"></script>
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/loader.js"></script>
    <script src="js/logout.js"></script>
    <script src="js/wallet.js"></script>

    <script type="text/javascript">

      document.querySelector(".navbar-toggler").addEventListener('click', (e) => {
        if ($("#navbarTogglerDemo01").hasClass("show") == true ) {
           document.getElementById("navbarTogglerDemo01").style.background = "";
        } else {
          document.getElementById("navbarTogglerDemo01").style.background = "gray";
          document.getElementById("navbarTogglerDemo01").style.opacity = "0.8";
        }
      })



      $('[data-type="card-number"]').bind("keyup change", function(e) {
        if($("#cardno").val().length == 4){
           document.getElementById('cardno').value =  document.getElementById('cardno').value + " ";
        }
        else if(($("#cardno").val().length == 9)){
          document.getElementById('cardno').value =  document.getElementById('cardno').value + " ";
        }
        else if(($("#cardno").val().length == 14)){
          document.getElementById('cardno').value =  document.getElementById('cardno').value + " ";
        }
      });


    firebase.auth().onAuthStateChanged(function(user) {
      db.collection('users').doc(user.uid).get().then(doc => {
        document.getElementById('navuser').innerHTML = doc.data().name;
      })
    }); 

      

    </script>
      
  </body>
</html>